import{r as a,c as l,a as e,w as v,v as _,n as I,t as f,e as b,F as k,b as V,o as n}from"./index-9eAmFj5M.js";import{a as h}from"./axios-DsPaXkF5.js";const C={id:"app"},E={class:"container mt-2"},S=e("h2",null,"登入",-1),T={class:"form-group"},z=e("label",{for:"exampleInputEmail1"},"Email",-1),B={class:"form-group my-3"},D=e("label",{for:"exampleInputPassword1"},"Password",-1),F=e("hr",null,null,-1),P=e("h2",null,"新增資料",-1),U={class:"form-group"},$=e("hr",null,null,-1),A=e("h2",null,"取得資料",-1),N={key:1},y="https://todolist-api.hexschool.io",j={__name:"Day18View",setup(H){const c=a(""),d=a(""),r=a(""),i=a(!1),p=a(""),m=a([]),u=a(""),x=async()=>{try{const t=await h.post(`${y}/users/sign_in`,{email:c.value,password:d.value});r.value="登入成功",p.value=t.data.token,i.value=!1,g()}catch(t){r.value="登入失敗: "+t.response.data.message,i.value=!0}},w=async()=>{try{const t={content:u.value},o=h.post(`${y}/todos/`,t,{headers:{Authorization:p.value}});console.log("資料新增成功:",o.data),u.value="",alert("資料新增成功"),g()}catch(t){console.error("新增資料時發生錯誤:",t),alert("新增資料時發生錯"+t.response.data.message)}},g=async()=>{try{const t=await h.get(`${y}/todos/`,{headers:{Authorization:p.value}});m.value=t.data.data}catch(t){console.error("新增資料時發生錯誤:",t),alert("新增資料時發生錯"+t.response.data.message)}};return(t,o)=>(n(),l("div",C,[e("div",E,[S,e("form",null,[e("div",T,[z,v(e("input",{"onUpdate:modelValue":o[0]||(o[0]=s=>c.value=s),type:"email",class:"form-control",id:"exampleInputEmail1","aria-describedby":"emailHelp",placeholder:"請輸入信箱"},null,512),[[_,c.value]])]),e("div",B,[D,v(e("input",{"onUpdate:modelValue":o[1]||(o[1]=s=>d.value=s),type:"password",class:"form-control",id:"exampleInputPassword1",placeholder:"請輸入密碼"},null,512),[[_,d.value]])]),e("button",{onClick:x,type:"button",class:"btn btn-primary"},"登入")]),r.value?(n(),l("p",{key:0,class:I({"mt-2":!0,"text-danger":i.value,"text-success":!i.value})},f(r.value),3)):b("",!0),F,e("form",null,[P,e("div",U,[v(e("input",{"onUpdate:modelValue":o[2]||(o[2]=s=>u.value=s),type:"text",class:"form-control",id:"exampleFormControlInput2",placeholder:"請輸入內容"},null,512),[[_,u.value]])]),e("button",{onClick:w,type:"button",class:"btn btn-primary mt-3"},"送出")]),$,A,m.value?(n(),l("ul",N,[(n(!0),l(k,null,V(m.value,s=>(n(),l("li",{key:s.id},f(s.content),1))),128))])):b("",!0)])]))}};export{j as default};
