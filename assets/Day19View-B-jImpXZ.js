import{r as a,c as n,a as t,w as y,v as f,n as T,t as b,e as g,F as x,b as C,o as r,d as E}from"./index-D_ipAWOW.js";import{a as c}from"./axios-DsPaXkF5.js";const V=t("h2",null,[t("a",{href:"https://hackmd.io/MEtSEbALTTOpkOvLDBZPnA",target:"_black"},"Day19 - todolist 實作篇 - 刪除資料功能"),t("p",null,[t("a",{href:"https://todolist-api.hexschool.io/doc/#/"},"TodoList API")])],-1),A={id:"app"},S={class:"container mt-2"},$=t("h2",null,"登入",-1),D={class:"form-group"},P=t("label",{for:"exampleInputEmail1"},"Email",-1),z={class:"form-group my-3"},B=t("label",{for:"exampleInputPassword1"},"Password",-1),L=t("hr",null,null,-1),F=t("h2",null,"新增資料",-1),N={class:"form-group"},U=t("hr",null,null,-1),M=t("h2",null,"取得資料",-1),O={key:1},H=["onClick"],p="https://todolist-api.hexschool.io",J={__name:"Day19View",setup(Z){const m=a(""),h=a(""),i=a(""),d=a(!1),u=a(""),v=a([]),l=a(""),k=async()=>{try{const e=await c.post(`${p}/users/sign_in`,{email:m.value,password:h.value});i.value="登入成功",u.value=e.data.token,d.value=!1,_()}catch(e){i.value="登入失敗: "+e.response.data.message,d.value=!0}},w=async()=>{if(!l.value)return;const e={content:l.value};await c.post(`${p}/todos`,e,{headers:{Authorization:u.value}}),l.value="",_()},_=async()=>{const e=await c.get(`${p}/todos`,{headers:{Authorization:u.value}});v.value=e.data.data},I=async e=>{await c.delete(`${p}/todos/${e}`,{headers:{Authorization:u.value}}).then(o=>{_(),console.log("資料刪除成功:",o.data)}).catch(o=>{console.error("刪除資料時發生錯誤:",o)})};return(e,o)=>(r(),n(x,null,[V,t("div",A,[t("div",S,[$,t("form",null,[t("div",D,[P,y(t("input",{"onUpdate:modelValue":o[0]||(o[0]=s=>m.value=s),type:"email",class:"form-control",id:"exampleInputEmail1","aria-describedby":"emailHelp",placeholder:"請輸入信箱"},null,512),[[f,m.value]])]),t("div",z,[B,y(t("input",{"onUpdate:modelValue":o[1]||(o[1]=s=>h.value=s),type:"password",class:"form-control",id:"exampleInputPassword1",placeholder:"請輸入密碼"},null,512),[[f,h.value]])]),t("button",{onClick:k,type:"button",class:"btn btn-primary"},"登入")]),i.value?(r(),n("p",{key:0,class:T({"mt-2":!0,"text-danger":d.value,"text-success":!d.value})},b(i.value),3)):g("",!0),L,t("form",null,[F,t("div",N,[y(t("input",{"onUpdate:modelValue":o[2]||(o[2]=s=>l.value=s),type:"text",class:"form-control",id:"exampleFormControlInput2",placeholder:"請輸入內容"},null,512),[[f,l.value]])]),t("button",{onClick:w,type:"button",class:"btn btn-primary mt-3"},"送出")]),U,M,v.value?(r(),n("ul",O,[(r(!0),n(x,null,C(v.value,s=>(r(),n("li",{class:"mt-3 ms-1",key:s.id},[E(b(s.content)+" ",1),t("button",{onClick:j=>I(s.id),type:"button",class:"btn btn-danger"},"刪除",8,H)]))),128))])):g("",!0)])])],64))}};export{J as default};
