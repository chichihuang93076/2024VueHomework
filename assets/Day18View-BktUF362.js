import{r as a,c as l,a as e,w as h,v,n as I,t as f,e as b,F as x,b as C,o as n}from"./index-D_ipAWOW.js";import{a as _}from"./axios-DsPaXkF5.js";const E=e("h2",null,[e("a",{href:"https://hackmd.io/pW6au2C5RpaqE4QXG0pdsw",target:"_black"},"Day18 - todolist 實作篇：新增資料功能"),e("p",null,[e("a",{href:"https://todolist-api.hexschool.io/doc/#/"},"TodoList API")])],-1),V={id:"app"},S={class:"container mt-2"},T=e("h2",null,"登入",-1),D={class:"form-group"},P=e("label",{for:"exampleInputEmail1"},"Email",-1),z={class:"form-group my-3"},A=e("label",{for:"exampleInputPassword1"},"Password",-1),B=e("hr",null,null,-1),F=e("h2",null,"新增資料",-1),U={class:"form-group"},$=e("hr",null,null,-1),L=e("h2",null,"取得資料",-1),N={key:1},y="https://todolist-api.hexschool.io",M={__name:"Day18View",setup(q){const d=a(""),c=a(""),r=a(""),i=a(!1),p=a(""),m=a([]),u=a(""),w=async()=>{try{const t=await _.post(`${y}/users/sign_in`,{email:d.value,password:c.value});r.value="登入成功",p.value=t.data.token,i.value=!1,g()}catch(t){r.value="登入失敗: "+t.response.data.message,i.value=!0}},k=async()=>{try{const t={content:u.value},o=_.post(`${y}/todos/`,t,{headers:{Authorization:p.value}});console.log("資料新增成功:",o.data),u.value="",alert("資料新增成功"),g()}catch(t){console.error("新增資料時發生錯誤:",t),alert("新增資料時發生錯"+t.response.data.message)}},g=async()=>{try{const t=await _.get(`${y}/todos/`,{headers:{Authorization:p.value}});m.value=t.data.data}catch(t){console.error("新增資料時發生錯誤:",t),alert("新增資料時發生錯"+t.response.data.message)}};return(t,o)=>(n(),l(x,null,[E,e("div",V,[e("div",S,[T,e("form",null,[e("div",D,[P,h(e("input",{"onUpdate:modelValue":o[0]||(o[0]=s=>d.value=s),type:"email",class:"form-control",id:"exampleInputEmail1","aria-describedby":"emailHelp",placeholder:"請輸入信箱"},null,512),[[v,d.value]])]),e("div",z,[A,h(e("input",{"onUpdate:modelValue":o[1]||(o[1]=s=>c.value=s),type:"password",class:"form-control",id:"exampleInputPassword1",placeholder:"請輸入密碼"},null,512),[[v,c.value]])]),e("button",{onClick:w,type:"button",class:"btn btn-primary"},"登入")]),r.value?(n(),l("p",{key:0,class:I({"mt-2":!0,"text-danger":i.value,"text-success":!i.value})},f(r.value),3)):b("",!0),B,e("form",null,[F,e("div",U,[h(e("input",{"onUpdate:modelValue":o[2]||(o[2]=s=>u.value=s),type:"text",class:"form-control",id:"exampleFormControlInput2",placeholder:"請輸入內容"},null,512),[[v,u.value]])]),e("button",{onClick:k,type:"button",class:"btn btn-primary mt-3"},"送出")]),$,L,m.value?(n(),l("ul",N,[(n(!0),l(x,null,C(m.value,s=>(n(),l("li",{key:s.id},f(s.content),1))),128))])):b("",!0)])])],64))}};export{M as default};
